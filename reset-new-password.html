<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create New Password - FlavorShare</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body class="signin-body">

    <!-- Dark Mode Toggle -->
    <div class="darkmode-toggle" onclick="toggleDarkMode()">ğŸŒ™</div>

    <!-- Page Container -->
    <div class="signin-container">

        <!-- Floating Shapes -->
        <div class="signin-shape shape1"></div>
        <div class="signin-shape shape2"></div>
        <div class="signin-shape shape3"></div>

        <!-- Glassmorphic Reset Card -->
        <form class="signin-card" onsubmit="return updatePassword(event)">

            <div class="signin-logo">New Password</div>

            <h1>Create a New Password</h1>
            <p class="signin-subtext">
                Your new password must be strong and secure.
            </p>

            <!-- Password Input -->
            <label>New Password</label>
            <div class="password-field">
                <input id="newPass" type="password" placeholder="Enter new password" required>
                <span class="toggle-pass" onclick="togglePassword('newPass', this)">ğŸ‘</span>
            </div>

            <!-- Strength Meter -->
            <div id="strength-bar">
                <span></span>
            </div>
            <p id="strength-text">Strength: Weak</p>

            <!-- Confirm Password -->
            <label>Confirm Password</label>
            <div class="password-field">
                <input id="confirmPass" type="password" placeholder="Re-enter password" required>
                <span class="toggle-pass" onclick="togglePassword('confirmPass', this)">ğŸ‘</span>
            </div>

            <button type="submit" class="signin-btn">Update Password</button>

            <p class="signin-alt">
                Remembered your password? <a href="sign-in.html">Sign In</a>
            </p>
        </form>
    </div>

    <!-- Success Popup -->
    <div id="success-popup">âœ” Password Updated!</div>

    <script>
        /* Dark Mode Toggle */
        function toggleDarkMode() {
            document.body.classList.toggle("dark-mode");
        }

        /* Show/Hide Password */
        function togglePassword(id, el) {
            const input = document.getElementById(id);
            if (input.type === "password") {
                input.type = "text";
                el.textContent = "ğŸ™ˆ";
            } else {
                input.type = "password";
                el.textContent = "ğŸ‘";
            }
        }

        /* Password Strength Checker */
        const passInput = document.getElementById("newPass");
        const bar = document.querySelector("#strength-bar span");
        const text = document.getElementById("strength-text");

        passInput.addEventListener("input", () => {
            const value = passInput.value;
            let strength = 0;

            if (value.length >= 6) strength++;
            if (/[A-Z]/.test(value)) strength++;
            if (/[0-9]/.test(value)) strength++;
            if (/[^A-Za-z0-9]/.test(value)) strength++;

            bar.style.width = (strength * 25) + "%";

            if (strength === 0) {
                text.textContent = "Strength: Weak";
                bar.style.background = "#d9534f";
            } else if (strength <= 2) {
                text.textContent = "Strength: Fair";
                bar.style.background = "#f39c12";
            } else if (strength === 3) {
                text.textContent = "Strength: Good";
                bar.style.background = "#27ae60";
            } else {
                text.textContent = "Strength: Strong";
                bar.style.background = "#2ecc71";
            }
        });

        /* Submit Handler */
        function updatePassword(e) {
            e.preventDefault();

            const pass1 = document.getElementById("newPass").value;
            const pass2 = document.getElementById("confirmPass").value;

            if (pass1 !== pass2) {
                alert("Passwords do not match.");
                return false;
            }

            // Success Animation
            const popup = document.getElementById("success-popup");
            popup.classList.add("show");

            setTimeout(() => {
                window.location.href = "sign-in.html";
            }, 1800);

            return false;
        }
    </script>

</body>
</html>
